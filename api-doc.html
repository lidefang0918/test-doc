<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>接口文档 | ruoyi-vue-pro 开发指南</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .source-url {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
        }
        .content-wrapper {
            line-height: 1.8;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px 0;
        }
        pre {
            background: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
        }
        code {
            background: #f6f8fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>接口文档 | ruoyi-vue-pro 开发指南</h1>
        <div class="source-url">原始链接: <a href="https://doc.iocoder.cn/api-doc/">https://doc.iocoder.cn/api-doc/</a></div>
    </div>
    <div class="content-wrapper">
        <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">接口文档<!----></h1>  <div class="theme-vdoing-content content__default"><p>项目使用 Swagger 实现 RESTful API 的接口文档，提供两种解决方案：</p> <p>*【推荐】 <a href="http://mtw.so/62me9n" target="_blank" rel="noopener noreferrer">Apifox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：强大的 API 工具，支持 API 文档、API 调试、API Mock、API 自动化测试</p> <ul><li>Knife4j：简易的 API 工具，仅支持 API 文档、API 调试</li></ul> <div class="custom-block tip"><p class="custom-block-title">为什么选择 Swagger 呢？</p> <p>Swagger 通过 Java 注解实现 API 接口文档的编写。相比使用 Java 注释的方式，注解提供更加规范的接口定义方式，开发体验更好。</p> <p>如果你没有学习 Swagger，可以阅读 <a href="https://www.iocoder.cn/Spring-Boot/Swagger/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot API 接口文档 Swagger 入门 》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 文章。</p></div> <h2 id="_1-apifox-使用"><a href="#_1-apifox-%E4%BD%BF%E7%94%A8" class="header-anchor">#</a> 1. Apifox 使用</h2> <p>本小节，我们来将项目中的 API 接口，一键导入到 Apifox 中，并使用它发起一次 API 的调用。</p> <h3 id="_1-1-下载工具"><a href="#_1-1-%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7" class="header-anchor">#</a> 1.1 下载工具</h3> <p>点击 <a href="http://mtw.so/62me9n" target="_blank" rel="noopener noreferrer">Apifox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 首页，下载对应的 Apifox 桌面版。如下图所示：</p> <div class="custom-block tip"><p class="custom-block-title">为什么要下载 Apifox 桌面版？</p> <p>艿艿已经卸载 Postman，使用 Apifox 进行替代。国产软件，yyds 永远滴神！</p> <p>国内很多互联网公司，包括百度、阿里、腾讯、字节跳动等等在内，都在使用 Apifox 作为 API 工具。</p></div> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/01.png" alt="Apifox 下载"></p> <p>解压后，双击进行安装即可。黑色界面，非常酷炫。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/02.png" alt="Apifox 界面"></p> <h3 id="_1-2-api-导入"><a href="#_1-2-api-%E5%AF%BC%E5%85%A5" class="header-anchor">#</a> 1.2 API 导入</h3> <p>① 先点击「示例项目」，再点击「+」按钮，选择「导入」选项。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/03.png" alt="Apifox 界面 —— 导入"></p> <p>② 先选择「URL 导入」按钮，填写 Swagger 数据 URL 为 <code>http://127.0.0.1:48081/v3/api-docs</code> 。如果失败，则可以尝试 <code>http://127.0.0.1:48080/v3/api-docs/all</code> 解决。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/04.png" alt="Apifox 界面 —— Swagger"></p> <p>③ 先点击「提交」按钮，再点击「确认导入」按钮，完成 API 接口的导入。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/05.png" alt="Apifox 界面 —— Swagger"></p> <p>④ 导入完成后，点击「接口管理」按钮，可以查看到 API 列表。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/06.png" alt="Apifox 界面 —— 接口管理"></p> <h3 id="_1-3-api-调试"><a href="#_1-3-api-%E8%B0%83%E8%AF%95" class="header-anchor">#</a> 1.3 API 调试</h3> <p>① 先点击右上角「请选择环境」，再点击「管理环境」选项，填写测试环境的地址为 <code>http://127.0.0.1:48080</code>，并进行保存。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/07.png" alt="Apifox 界面 —— 管理环境"></p> <p>② 点击「管理后台 —— 认证」的「使用账号密码登录」接口，查看该 API 接口的定义。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/08.png" alt="Apifox 界面 —— 认证"></p> <p>③ 点击「运行」按钮，填写 Headers 的 <code>tenant-id</code> 为 1，再点击 Body 的「自动生成」按钮，最后点击「发送」按钮。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/09.png" alt="Apifox 界面 —— 认证"></p> <p>注意，登录接口不要填写 <code>socialType</code>、<code>socialCode</code>、<code>socialState</code> 这三个参数，它们是三方登录的参数。一定要去掉，不然会报错噢！</p> <h3 id="_1-4-常见问题"><a href="#_1-4-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" class="header-anchor">#</a> 1.4 常见问题</h3> <p>问题 ①：分页 GET 请求时，如果有 <code>createTime</code> 这种时间类型的数组参数，会报错。如下图所示：</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Apifox%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%981.png" alt="Apifox 常见问题 1"></p> <p>答：把 <code>createTime</code> 左右两边的 <code>[]</code> 去掉，即可解决。</p> <h2 id="_2-knife4j-使用"><a href="#_2-knife4j-%E4%BD%BF%E7%94%A8" class="header-anchor">#</a> 2. Knife4j 使用</h2> <h3 id="_2-1-如何使用"><a href="#_2-1-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8" class="header-anchor">#</a> 2.1 如何使用？</h3> <p>浏览器访问 <a href="http://127.0.0.1:48080/doc.html" target="_blank" rel="noopener noreferrer">http://127.0.0.1:48080/doc.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 地址，使用 Knife4j 查看 API 接口文档。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/21.png" alt="Knife4j 界面"></p> <p>① 点击任意一个接口，进行接口的调用测试。这里，使用「管理后台 - 用户个中心」的“获得登录用户信息”举例子。</p> <p>② 点击左侧「调试」按钮，并将请求头部的 <code>header-id</code> 和 <code>Authorization</code> 勾选上。</p> <p>其中，<code>header-id</code> 为租户编号，<code>Authorization</code> 的 <code>"Bearer test"</code> 后面为用户编号（模拟哪个用户操作）。</p> <p>如果不勾选，会出现 <code>"请求的租户标识未传递，请进行排查"</code> 或 <code>"账号未登录"</code> 错误。</p> <p>③ 点击「发送」按钮，即可发起一次 API 的调用。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Knife4j%E8%B0%83%E7%94%A8.png" alt="Knife4j 调试"></p> <h3 id="_2-2-如何开启登录"><a href="#_2-2-%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E7%99%BB%E5%BD%95" class="header-anchor">#</a> 2.2 如何开启登录？</h3> <p>生产环境下，建议 Knife4j 接口界面开启“安全认证”的功能，避免出现安全事故。</p> <p>只需要在 <code>knife4j.basic</code> 配置项中，额外添加 Basic Auth 认证即可，如下所示：</p> <div class="language-YAML extra-class"><pre class="language-yaml"><code><span class="token key atrule">knife4j</span><span class="token punctuation">:</span>
  <span class="token key atrule">basic</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin <span class="token comment"># Basic 认证用户名</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> admin <span class="token comment"># Basic 认证密码</span>
</code></pre></div><h2 id="_3-swagger-技术组件"><a href="#_3-swagger-%E6%8A%80%E6%9C%AF%E7%BB%84%E4%BB%B6" class="header-anchor">#</a> 3. Swagger 技术组件</h2> <p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/pom.xml" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-web</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 技术组件的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/swagger/package-info.java" target="_blank" rel="noopener noreferrer"><code>swagger</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 包，实现了对 Swagger 的封装。</p> <p>② 如果想要禁用 Swagger 功能，可通过 <code>springdoc.api-docs.enable</code> 配置项为 <code>false</code>。一般情况下，建议 prod 生产环境进行禁用，避免发生安全问题。</p> <p><img src="/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Swagger%E5%85%B3%E9%97%AD.png" alt="Swagger 关闭"></p> <div class="custom-block tip"><p class="custom-block-title">友情提示：除了通过 enable 进行关闭外，更建议的是通过 knife4j 提供的 `knife4j.production = true` 来实现</p> <ul><li>可见星球：<a href="https://wx.zsxq.com/group/88858522214142/topic/4844122558542458" target="_blank" rel="noopener noreferrer">https://wx.zsxq.com/group/88858522214142/topic/4844122558542458<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>可见文档：<a href="https://doc.xiaominfo.com/docs/features/accessControl" target="_blank" rel="noopener noreferrer">《Knife4j 文档 —— 访问权限控制》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div></div>
    </div>
</body>
</html>